name: everything

containers:
  test:
    image: busybox

    # test that NET_ADMIN is enabled - should succeed
    # command: ["/bin/sh", "-c", "ip link set lo down"]

    # test that MKNOD is disabled - should fail
    # command: ["/bin/sh", "-c", "mknod -m 0666 /dev/null2 c 1 3"]

    # test that device is mapped - should succeed
    # command: ["busybox", "ls", "/dev/myloop0"]

    # test entrypoint
    # entrypoint: ["echo"]
    # command: ["this", "should", "be", "echoed"]

    # test environment
    # environment:
    #   - FOO=1
    # command: echo $FOO

    memory: 4m
    cpu_shares: 100
    cpu_set: "0"

    cap_add:
      - NET_ADMIN
    cap_drop:
      - MKNOD
    devices:
      - /dev/loop0:/dev/myloop0:rwm
