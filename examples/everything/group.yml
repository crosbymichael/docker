name: everything

containers:
  test:
    build: .

    # test with `docker inspect everything/test`
    # memory: 4m
    # cpu_shares: 100
    # cpu_set: "0"
    # tty: true
    # command: sleep 300

    # test that NET_ADMIN is enabled - should succeed
    # cap_add:
    #   - NET_ADMIN
    # command: ["/bin/sh", "-c", "ip link set lo down"]

    # test that MKNOD is disabled - should fail
    # cap_drop:
    #   - MKNOD
    # command: ["/bin/sh", "-c", "mknod -m 0666 /dev/null2 c 1 3"]

    # test that device is mapped - should succeed
    # devices:
    #   - /dev/loop0:/dev/myloop0:rwm
    # command: ["busybox", "ls", "/dev/myloop0"]

    # test entrypoint
    # entrypoint: ["echo"]
    # command: ["this", "should", "be", "echoed"]

    # test environment
    # environment:
    #   - FOO=1
    # command: echo $FOO

    # test user - should output "someone"
    # user: someone
    # command: whoami

    # test workdir - should output "/tmp"
    # working_dir: /tmp
    # command: pwd
